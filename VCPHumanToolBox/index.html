<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VCP äººç±»å·¥å…·ç®±</title>
    <link rel="stylesheet" href="../styles/themes.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="WorkflowEditormodules/workflow-editor.css">
    <link rel="stylesheet" href="WorkflowEditormodules/WorkflowEditor_ApiConfigDialog.css">
</head>
<body>
    <div class="title-bar">
        <div class="title">VCP äººç±»å·¥å…·ç®±</div>
        <div class="window-controls">
            <div class="control-btn" id="theme-toggle-btn">ğŸŒ™</div>
            <div class="control-btn" id="minimize-btn">-</div>
            <div class="control-btn" id="maximize-btn">â–¡</div>
            <div class="control-btn" id="close-btn">&times;</div>
        </div>
    </div>
    <div class="container">
        <header>
            <h1>å·¥å…·ç®±</h1>
            <p>ä¸€ä¸ªä¸ºäººç±»è®¾è®¡çš„ç›´è§‚å·¥å…·è°ƒç”¨ç•Œé¢ã€‚</p>
            <div class="header-actions">
                <button id="settings-btn" class="settings-btn" style="
                    background-color: var(--secondary-color, #6b7280);
                    color: white;
                    border: none;
                    padding: 8px 16px;
                    border-radius: 4px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                    margin-right: 10px;
                ">
                    <span style="font-size: 16px;">âš™ï¸</span> è®¾ç½®
                </button>
                <button id="workflow-btn" class="workflow-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    å·¥ä½œæµç¼–æ’
                </button>
            </div>
        </header>

        <main id="main-content">
            <div id="tool-grid" class="tool-grid">
                <!-- å·¥å…·å¡ç‰‡å°†ç”±JSåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <div id="tool-detail-view" class="tool-detail-view" style="display: none;">
                <button id="back-to-grid-btn" class="back-btn">&larr; è¿”å›å·¥å…·åˆ—è¡¨</button>
                <h2 id="tool-title"></h2>
                <p id="tool-description"></p>
                <form id="tool-form"></form>
                <div id="result-container" class="result-container"></div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        z-index: 2000;
        justify-content: center;
        align-items: center;
    ">
        <div style="
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            width: 500px;
            max-width: 90%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
        ">
            <h2 style="margin-top: 0; color: var(--primary-text);">è®¾ç½®</h2>

            <div class="form-group" style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--secondary-text);">VCP Server URL</label>
                <input type="text" id="setting-server-url" placeholder="http://127.0.0.1:3000" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--primary-text);">
            </div>

            <div class="form-group" style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--secondary-text);">VCP API Key</label>
                <input type="password" id="setting-api-key" placeholder="vcp_api_key_..." style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--primary-text);">
            </div>

            <div class="form-group" style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--secondary-text);">Admin Username (Optional)</label>
                <input type="text" id="setting-admin-user" placeholder="admin" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--primary-text);">
                <div style="font-size: 12px; color: var(--secondary-text); margin-top: 4px;">Required to fetch tool list from server.</div>
            </div>

            <div class="form-group" style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--secondary-text);">Admin Password (Optional)</label>
                <input type="password" id="setting-admin-pass" placeholder="password" style="width: 100%; padding: 10px; border-radius: 6px; border: 1px solid var(--border-color); background: var(--input-bg); color: var(--primary-text);">
            </div>

            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button id="close-settings-btn" style="padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; background: var(--secondary-color, #6b7280); color: white;">å–æ¶ˆ</button>
                <button id="save-settings-btn" style="padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; background: var(--primary-color); color: white;">ä¿å­˜å¹¶åˆ·æ–°</button>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥jsPlumbåº“ -->
    <script src="WorkflowEditormodules/jsplumb.min.js"></script>

    <!-- å¼•å…¥å·¥ä½œæµç¼–è¾‘å™¨æ¨¡å— -->
    <script src="WorkflowEditormodules/WorkflowEditor_ApiConfigDialog.js"></script>
    <!-- AI å®¢æˆ·ç«¯ï¼ˆHTTP å®ç° + å·¥å‚ï¼‰ï¼Œå¿…é¡»åœ¨ NodeManager ä¹‹å‰åŠ è½½ -->
    <script src="WorkflowEditormodules/ai/HttpAiClient.js"></script>
    <script src="WorkflowEditormodules/ai/AiClientFactory.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_PluginManager.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_StateManager.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_CanvasManager_JSPlumb.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_NodeManager.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_NodeManager_URLExtractor.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_ExecutionEngine.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_UIManager.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_ConnectionManager_Simplified.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_Config.js"></script>
    <script src="WorkflowEditormodules/WorkflowEditor_PluginDialog.js"></script>

    <!-- å¼•å…¥ marked åº“ -->
    <script src="../vendor/marked.min.js"></script>
    <script type="module" src="renderer.js"></script>
</body>
</html>
